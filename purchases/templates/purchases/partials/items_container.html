<div id="items-container" class="bg-white border border-gray-200 rounded-lg mb-6">
    <div class="px-6 py-4 border-b border-gray-200">
        <h2 class="text-lg font-semibold text-gray-900">Order Items</h2>
    </div>
    <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Description</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Unit Cost</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Discount</th>
                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Line Total</th>
                    <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                {% for item in po_data.items %}
                <tr>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        {{ item.description }}
                        {% if item.product_name %}<br><span class="text-xs text-gray-500">{{ item.product_name }}</span>{% endif %}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right">{{ item.quantity|floatformat:"-2" }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right">${{ item.unit_cost|floatformat:2 }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right">{{ item.discount_percent|floatformat:"-2" }}%</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right">${{ item.line_total|floatformat:2 }}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
                        <button type="button" 
                                hx-post="{% url 'purchases:purchase_order_remove_item' %}"
                                hx-target="#items-container"
                                hx-swap="outerHTML"
                                hx-vals='{"item_index": {{ forloop.counter0 }}}'
                                class="text-red-600 hover:text-red-900">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="px-6 py-8 text-center text-sm text-gray-500">
                        No items added yet. Add products to continue.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
            {% if po_data.items %}
            <tfoot class="bg-gray-50">
                <tr>
                    <td colspan="4" class="px-6 py-3 text-right text-sm font-medium text-gray-900">Subtotal:</td>
                    <td class="px-6 py-3 text-right text-sm font-medium text-gray-900">${{ subtotal|default:0|floatformat:2 }}</td>
                    <td></td>
                </tr>
            </tfoot>
            {% endif %}
        </table>
    </div>
</div>